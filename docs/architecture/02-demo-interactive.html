<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RiskMind AI Engine â€” Complete Architecture</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
html{font-size:16px}
body{background:#060A13;color:#EDF2F7;font-family:'Outfit',sans-serif;min-height:100vh;overflow-x:hidden}
button{font-family:inherit;cursor:pointer;border:none;background:none;transition:all .2s}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#0C1220}::-webkit-scrollbar-thumb{background:#3D4A5C;border-radius:6px}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.35}}
@keyframes slideUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.su{animation:slideUp .4s ease both}.fi{animation:fadeIn .3s ease both}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const{useState,useEffect,useRef,useCallback}=React;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• THEME â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const T={
  bg:"#060A13",sf:"#0C1220",cd:"#111A2E",bd:"#1A2744",bl:"#3D4A5C",
  wh:"#EDF2F7",t1:"#CBD5E1",t2:"#8B96A9",t3:"#586577",
  blue:"#4E8EF7",cyan:"#22D3EE",green:"#34D399",amber:"#FBBF24",
  rose:"#FB7185",violet:"#A78BFA",orange:"#FB923C",pink:"#F472B6",
  lime:"#A3E635",aws:"#FF9900",anth:"#D4A574",teal:"#39D2C0"
};
const M="'JetBrains Mono',monospace";

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SHARED COMPONENTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const Glow=({c,s=9,p})=><span style={{display:"inline-block",width:s,height:s,borderRadius:"50%",background:c,boxShadow:`0 0 ${s+3}px ${c}80`,animation:p?"pulse 2s ease-in-out infinite":"none",flexShrink:0}}/>;

const Badge=({l,v,c})=><span style={{display:"inline-flex",alignItems:"center",gap:7,padding:"5px 13px",borderRadius:8,background:c+"11",border:`1px solid ${c}22`}}>
  <Glow c={c} s={6}/><span style={{fontSize:13,color:T.t2,fontFamily:M}}>{l}</span><span style={{fontSize:15,fontWeight:700,color:c,fontFamily:M}}>{v}</span>
</span>;

const Card=({children,border,style:sx,...p})=><div style={{padding:20,borderRadius:14,background:T.cd,border:`1px solid ${border||T.bd}`,...sx}} {...p}>{children}</div>;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• AGENT DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const AGENTS={
  cortex:{n:"RM-Cortex",i:"ğŸ§ ",c:T.lime,r:"Domain Intelligence & Learning",
    h:["Insurance terminology recognition (1200+ terms)","KPI derivation engine â€” 42 formulas auto-computed","Session context memory across questions","Behavioral pattern learning per user/role"],
    aws:"Lambda fn",step:1},
  orchestrator:{n:"RM-Orchestrator",i:"ğŸ§¬",c:T.blue,r:"Central Intelligence Router",
    h:["Intent classification from natural language","Multi-function execution plan generation","Agent routing via 8-node LangGraph state machine","Parallel vs sequential decision logic"],
    aws:"Step Functions entry",step:2},
  schema:{n:"RM-SchemaReader",i:"ğŸ“",c:T.cyan,r:"Data Schema Interpreter",
    h:["Schema introspection without touching data","Column â†’ business concept mapping","Relationship & join path detection","Query complexity assessment"],
    aws:"Lambda â†’ Aurora metadata",step:3},
  cache:{n:"RM-CacheLayer",i:"ğŸ’¾",c:T.amber,r:"Adaptive Performance Buffer",
    h:["Pattern-learned adaptive pre-warming","User behavior tracking per role & time","Predictive cache at active hours","Outage buffering & graceful fallback"],
    aws:"Lambda â†’ ElastiCache",step:4},
  executor:{n:"RM-Executor",i:"âš¡",c:T.green,r:"Deterministic Compute Engine",
    h:["SQL execution on full dataset (5M+ rows)","Statistical analysis & aggregation","Parallel function execution","Returns 30-60 summary rows â€” zero LLM cost"],
    aws:"Lambda â†’ Aurora queries",step:5},
  rag:{n:"RM-KnowledgeRAG",i:"ğŸ“š",c:T.violet,r:"3-Source RAG Engine",
    h:["ChromaDB pgvector semantic search","UW guidelines + past decisions + thresholds","Regulatory context injection","Similarity scoring with confidence"],
    aws:"Lambda â†’ Aurora pgvector",step:6},
  analyst:{n:"RM-Analyst",i:"ğŸ”¬",c:T.orange,r:"Insight Synthesizer",
    h:["Cross-dimensional pattern synthesis","Root cause identification & narratives","Confidence scoring (0-100)","Cortex-derived KPI integration"],
    aws:"Lambda â†’ Anthropic API",step:7},
  sentinel:{n:"RM-Sentinel",i:"ğŸ›¡ï¸",c:T.pink,r:"Validation & Failsafe Guard",
    h:["Output validation against executor data","LLM fallback chain: Claude â†’ Bedrock â†’ OpenAI â†’ Mock","Error recovery & retry logic","Graceful degradation"],
    aws:"Lambda fn",step:8},
  glassbox:{n:"RM-GlassBox",i:"ğŸ”",c:T.rose,r:"Transparency & Verification",
    h:["KPI cards with verifiable real numbers","Source citations for every claim","Evidence mapping to raw data","Actionable recommendation generation"],
    aws:"Lambda â†’ API GW response",step:9},
};
const AGENT_KEYS=Object.keys(AGENTS);
const AGENT_LIST=AGENT_KEYS.map(k=>({id:k,...AGENTS[k]}));

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FLOW STEPS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const STEPS=[
  {id:0,ph:"INPUT",ag:null,title:"User Question",desc:'"Find anomalies in high-risk policies showing deterioration"',vis:"input",time:"0ms",aiCtx:"0",dbSt:"5M rows waiting"},
  {id:1,ph:"CORTEX",ag:"cortex",title:"Domain Intelligence & Memory Recall",desc:"Recognizes 'deterioration' as insurance term (LR trending above 80% threshold). Recalls user asked about construction risk 2 days ago. Identifies #1 query type: anomaly detection (14Ã— this month). Pre-fetches outlier analysis from behavioral cache.",vis:"cortex",time:"40ms",aiCtx:"0",dbSt:"5M rows"},
  {id:2,ph:"PLAN",ag:"orchestrator",title:"Intent Classification â†’ 6-Function Plan",desc:"Detects multi-intent query: outlier detection, group_by, trend, top_n, correlation, pattern matching. Builds parallel execution plan via LangGraph state machine.",vis:"plan",time:"80ms",aiCtx:"0",dbSt:"5M rows"},
  {id:3,ph:"CACHE",ag:"cache",title:"Smart Cache â€” 3 of 6 Pre-Warmed",desc:"Behavioral cache serves 3 analyses instantly from Cortex learning. Only 3 need fresh DB computation. 50% cache hit rate â†’ 40% faster execution.",vis:"cache",time:"130ms",aiCtx:"0",dbSt:"5M Â· 3/6 cached"},
  {id:4,ph:"EXECUTE",ag:"executor",title:"3 Parallel Queries on 5M Rows",desc:"Remaining 3 functions run in parallel on full dataset. 15M row-scans â†’ 39 summary rows. Zero LLM tokens consumed â€” pure deterministic SQL + stats.",vis:"execute",time:"380ms",aiCtx:"0 (DB only)",dbSt:"15M scans â†’ 39 rows"},
  {id:5,ph:"RAG",ag:"rag",title:"Guideline & Knowledge Retrieval",desc:"4 matching UW guidelines + 2 past decisions via ChromaDB pgvector semantic search. Includes UW-003 (LR Threshold 80%) and COMM-2023-041 (Declined at 195%).",vis:"rag",time:"420ms",aiCtx:"0",dbSt:"39 rows + 6 docs"},
  {id:6,ph:"ANALYZE",ag:"analyst",title:"AI Synthesis + Derived KPIs",desc:"~52 summary rows to Claude Sonnet. Cross-dimensional synthesis with Cortex-derived metrics: Combined Ratio 102.3%, Frequency 3.2/yr, Severity 1.8Ã— avg. Confidence: 89/100.",vis:"synthesis",time:"1.6s",aiCtx:"~52 rows to AI",dbSt:"5M in DB"},
  {id:7,ph:"VALIDATE",ag:"sentinel",title:"5/5 Validation Checks Passed",desc:"All numeric claims match executor. Derived KPI formulas verified. Guideline citations confirmed. Confidence in range. No fabricated IDs.",vis:"validate",time:"1.8s",aiCtx:"~52 verified",dbSt:"5M in DB"},
  {id:8,ph:"OUTPUT",ag:"glassbox",title:"Glass Box Response + Learning Log",desc:"Narrative + 4 KPI cards + 3 actionable recommendations + citation trail. Cortex logs interaction: anomaly weight +1, cache warmed for next session.",vis:"output",time:"2.0s",aiCtx:"â†’ narrative",dbSt:"5M in DB"},
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FLOW VISUAL PANELS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function FlowVisual({step}){
  const s=STEPS[step];
  const bx={padding:20,borderRadius:14,background:T.cd,border:`1px solid ${T.bd}`,height:"100%"};

  if(s.vis==="input")return<div style={bx}>
    <div style={{fontSize:13,color:T.t3,fontFamily:M,fontWeight:600,textTransform:"uppercase",letterSpacing:".06em",marginBottom:12}}>User Query</div>
    <div style={{fontSize:22,color:T.wh,fontWeight:700,lineHeight:1.4,marginBottom:18}}>"{s.desc.replace(/"/g,'')}"</div>
    <div style={{display:"flex",gap:8,flexWrap:"wrap"}}>{["Anomaly Detection","Driver Analysis","Pattern Match","Trend Analysis"].map(t=>
      <span key={t} style={{fontSize:14,padding:"6px 14px",borderRadius:7,background:T.cyan+"12",border:`1px solid ${T.cyan}20`,color:T.cyan,fontFamily:M,fontWeight:600}}>{t}</span>)}</div>
  </div>;

  if(s.vis==="cortex")return<div style={bx}>
    {[{t:"Terminology",x:"'deterioration' â†’ LR above 80% threshold breach",ic:"ğŸ“–"},
      {t:"Memory",x:"Construction risk queried 2 days ago â€” context retained",ic:"ğŸ’­"},
      {t:"Pattern",x:"#1 query type: anomaly detection (14Ã—/month)",ic:"ğŸ“Š"},
      {t:"Pre-fetch",x:"Outlier analysis already cached from learning",ic:"âš¡"},
      {t:"Derive",x:"Will auto-compute Combined Ratio, Frequency, Severity",ic:"ğŸ§®"}
    ].map((a,i)=><div key={i} style={{display:"flex",gap:12,padding:"10px 14px",borderRadius:8,marginBottom:6,background:T.lime+"06",border:`1px solid ${T.lime}10`,alignItems:"flex-start"}}>
      <span style={{fontSize:24}}>{a.ic}</span>
      <div><div style={{fontSize:12,fontWeight:700,color:T.lime,fontFamily:M,textTransform:"uppercase",letterSpacing:".04em",marginBottom:2}}>{a.t}</div>
      <div style={{fontSize:15,color:T.t1,lineHeight:1.5}}>{a.x}</div></div>
    </div>)}
  </div>;

  if(s.vis==="plan")return<div style={bx}>
    <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8}}>
      {["outliers(LR, 2Ïƒ)","group_by(industry)","trend(monthly, 12mo)","top_n(policies, 10)","correlation(ind Ã— severity)","pattern_match(3+ claims)"].map((p,i)=>
        <div key={i} style={{padding:"10px 14px",borderRadius:8,background:T.blue+"08",border:`1px solid ${T.blue}10`}}>
          <span style={{fontSize:14,color:T.t3,fontFamily:M,fontWeight:700,marginRight:8}}>{i+1}.</span>
          <span style={{fontSize:15,color:T.cyan,fontFamily:M,fontWeight:600}}>{p}</span>
        </div>)}
    </div>
  </div>;

  if(s.vis==="cache")return<div style={bx}>
    {[{f:"group_by(industry)",h:true,r:"Pattern cache"},{f:"trend(monthly)",h:true,r:"Recent cache"},{f:"outliers(LR, 2Ïƒ)",h:true,r:"Cortex pre-fetch"},
      {f:"top_n(policies, 10)",h:false,r:"Fresh DB query"},{f:"correlation(indÃ—sev)",h:false,r:"Fresh DB query"},{f:"pattern_match(3+)",h:false,r:"Fresh DB query"}
    ].map((c,i)=><div key={i} style={{display:"flex",alignItems:"center",gap:10,padding:"9px 14px",borderRadius:8,marginBottom:5,background:(c.h?T.green:T.rose)+"06",border:`1px solid ${c.h?T.green:T.rose}10`}}>
      <Glow c={c.h?T.green:T.rose} s={7}/>
      <span style={{flex:1,fontSize:15,color:T.t1,fontFamily:M}}>{c.f}</span>
      <span style={{fontSize:13,padding:"3px 10px",borderRadius:5,background:(c.h?T.green:T.rose)+"14",color:c.h?T.green:T.rose,fontWeight:700,fontFamily:M}}>{c.h?"HIT":"MISS"}</span>
      <span style={{fontSize:12,color:T.t3,fontFamily:M,minWidth:100,textAlign:"right"}}>{c.r}</span>
    </div>)}
  </div>;

  if(s.vis==="execute")return<div style={bx}>
    {[{f:"top_n(LR, 10)",r:"10 rows",t:"280ms"},{f:"correlation(ind Ã— sev)",r:"8 pairs",t:"310ms"},{f:"pattern_match(3+ claims)",r:"7 matches",t:"290ms"}].map((e,i)=>
      <div key={i} style={{display:"flex",alignItems:"center",gap:10,padding:"12px 14px",borderRadius:8,marginBottom:6,background:T.green+"06",border:`1px solid ${T.green}10`}}>
        <span style={{fontSize:16,color:T.green,fontFamily:M,fontWeight:700,flex:1}}>{e.f}</span>
        <span style={{fontSize:14,padding:"4px 12px",borderRadius:5,background:T.amber+"12",color:T.amber,fontWeight:700,fontFamily:M}}>{e.r}</span>
        <span style={{fontSize:14,color:T.t2,fontFamily:M}}>{e.t}</span>
      </div>)}
    <div style={{marginTop:10,padding:12,borderRadius:8,border:`1px dashed ${T.green}20`,textAlign:"center",fontSize:16,color:T.green,fontFamily:M,fontWeight:700}}>15M row-scans â†’ 39 result rows Â· Zero LLM cost</div>
  </div>;

  if(s.vis==="rag")return<div style={bx}>
    {[{s:"UW Guidelines",d:"UW-003: Loss Ratio Threshold 80%",m:"92%"},{s:"UW Guidelines",d:"UW-007: Construction Portfolio Limits",m:"87%"},
      {s:"Past Decisions",d:"COMM-2023-041: Declined at 195% LR",m:"84%"},{s:"Past Decisions",d:"COMM-2023-078: Referred at 120% LR",m:"79%"}
    ].map((r,i)=><div key={i} style={{display:"flex",alignItems:"center",gap:12,padding:"10px 14px",borderRadius:8,marginBottom:6,background:T.violet+"06",border:`1px solid ${T.violet}10`}}>
      <span style={{fontSize:24}}>{r.s.includes("UW")?"ğŸ“œ":"ğŸ“"}</span>
      <div style={{flex:1}}><div style={{fontSize:16,color:T.t1,fontFamily:M,fontWeight:600}}>{r.d}</div><div style={{fontSize:13,color:T.t3,fontFamily:M}}>{r.s}</div></div>
      <span style={{fontSize:13,padding:"4px 10px",borderRadius:5,background:T.violet+"14",color:T.violet,fontWeight:700,fontFamily:M}}>{r.m}</span>
    </div>)}
  </div>;

  if(s.vis==="synthesis")return<div style={bx}>
    <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:8,marginBottom:14}}>
      {[{l:"AI Input",v:"~52",c:T.orange},{l:"Dims",v:"6",c:T.cyan},{l:"Confidence",v:"89",c:T.green},{l:"DB Rows",v:"5M",c:T.t3}].map((m,i)=>
        <div key={i} style={{padding:12,borderRadius:8,textAlign:"center",background:m.c+"08",border:`1px solid ${m.c}10`}}>
          <div style={{fontSize:24,fontWeight:800,color:m.c,fontFamily:M}}>{m.v}</div>
          <div style={{fontSize:11,color:T.t3,fontFamily:M,textTransform:"uppercase",marginTop:2}}>{m.l}</div>
        </div>)}
    </div>
    <div style={{display:"flex",gap:8,flexWrap:"wrap",marginBottom:14}}>
      {["Combined: 102.3%","Frequency: 3.2/yr","Severity: 1.8Ã—"].map((d,i)=>
        <span key={i} style={{fontSize:15,padding:"6px 14px",borderRadius:7,background:T.lime+"12",border:`1px solid ${T.lime}16`,color:T.lime,fontFamily:M,fontWeight:700}}>{d}</span>)}
    </div>
    <div style={{padding:14,borderRadius:8,background:T.orange+"06",border:`1px solid ${T.orange}10`}}>
      <div style={{fontSize:15,color:T.t1,lineHeight:1.7}}>Construction (38% of losses) â†’ 3 policies driving 80% deterioration. 3+ claims in yr1 â†’ 78% chance LR exceeds 100%.</div>
    </div>
  </div>;

  if(s.vis==="validate")return<div style={bx}>
    {["All numeric claims match executor output","Derived KPI formulas independently verified","Guideline citations confirmed in RAG store","Confidence score within expected range (85-95)","Zero fabricated policy IDs detected"].map((c,i)=>
      <div key={i} style={{display:"flex",alignItems:"center",gap:12,padding:"10px 14px",borderRadius:8,marginBottom:6,background:T.green+"06",border:`1px solid ${T.green}10`}}>
        <span style={{fontSize:22}}>âœ…</span>
        <span style={{flex:1,fontSize:16,color:T.t1}}>{c}</span>
        <span style={{fontSize:13,padding:"3px 10px",borderRadius:5,background:T.green+"14",color:T.green,fontWeight:700,fontFamily:M}}>PASS</span>
      </div>)}
  </div>;

  if(s.vis==="output")return<div style={bx}>
    <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:14}}>
      {[{l:"Portfolio LR",v:"84.8%",c:T.blue},{l:"Combined Ratio",v:"102.3%",c:T.rose},{l:"Anomalies",v:"14",c:T.amber},{l:"Confidence",v:"89/100",c:T.green}].map((k,i)=>
        <div key={i} style={{padding:"14px 16px",borderRadius:8,background:k.c+"08",border:`1px solid ${k.c}12`}}>
          <div style={{fontSize:26,fontWeight:800,color:k.c,fontFamily:M}}>{k.v}</div>
          <div style={{fontSize:13,color:T.t2,fontFamily:M,marginTop:2}}>{k.l}</div>
        </div>)}
    </div>
    <div style={{display:"flex",gap:6,flexWrap:"wrap",marginBottom:14}}>
      {["Review COMM-2024-003","Decline 3 renewals >150%","Refer 4 to senior UW"].map((a,i)=>
        <span key={i} style={{fontSize:14,padding:"6px 14px",borderRadius:7,background:T.green+"08",border:`1px solid ${T.green}12`,color:T.green,fontFamily:M,fontWeight:600}}>â†’ {a}</span>)}
    </div>
    <div style={{padding:12,borderRadius:8,background:T.lime+"06",border:`1px dashed ${T.lime}16`,display:"flex",alignItems:"center",gap:10}}>
      <span style={{fontSize:24}}>ğŸ§ </span>
      <span style={{fontSize:15,color:T.lime,fontFamily:M,fontWeight:600}}>Cortex logged â†’ anomaly weight +1 â†’ cache warmed for next session</span>
    </div>
  </div>;
  return null;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: LIVE FLOW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function TabFlow(){
  const[step,setStep]=useState(0);const[play,setPlay]=useState(false);const ref=useRef();
  const s=STEPS[step];
  useEffect(()=>{if(play){ref.current=setInterval(()=>setStep(p=>{if(p>=STEPS.length-1){setPlay(false);return p}return p+1}),3200)}return()=>clearInterval(ref.current)},[play]);

  return<div className="su">
    <div style={{padding:"14px 20px",borderRadius:12,marginBottom:16,background:T.blue+"06",border:`1px solid ${T.blue}12`,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:10}}>
      <div><div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".06em",fontWeight:600}}>Live Use Case â€” Step-by-Step Walkthrough</div>
      <div style={{fontSize:19,color:T.wh,fontWeight:700,marginTop:3}}>"Find anomalies in high-risk policies" â€” <span style={{color:T.cyan}}>5,000,000 rows</span></div></div>
      <div style={{display:"flex",gap:8}}>
        <button onClick={()=>setPlay(!play)} style={{padding:"9px 20px",borderRadius:8,border:`1.5px solid ${play?T.rose:T.green}30`,background:play?T.rose+"12":T.green+"12",color:play?T.rose:T.green,fontSize:15,fontWeight:700,fontFamily:M}}>{play?"â¸ Pause":"â–¶ Play"}</button>
        <button onClick={()=>{setStep(0);setPlay(false)}} style={{padding:"9px 14px",borderRadius:8,border:`1.5px solid ${T.bd}`,color:T.t2,fontSize:14,fontFamily:M}}>â†º</button>
      </div>
    </div>
    <div style={{display:"flex",gap:4,marginBottom:16}}>{STEPS.map((st,i)=>{const ac=st.ag?AGENTS[st.ag].c:T.blue;return<button key={i} onClick={()=>{setStep(i);setPlay(false)}} style={{flex:1,padding:"8px 3px",borderRadius:7,border:`1.5px solid ${step===i?ac:T.bd}`,background:step===i?ac+"14":i<step?ac+"06":"transparent",position:"relative",overflow:"hidden"}}>
      {i<=step&&<div style={{position:"absolute",bottom:0,left:0,right:0,height:3,background:ac}}/>}
      <div style={{fontSize:10,color:T.t3,fontFamily:M,textTransform:"uppercase",fontWeight:600}}>{st.ph}</div>
      <div style={{fontSize:20,marginTop:2}}>{st.ag?AGENTS[st.ag].i:"ğŸ’¬"}</div>
    </button>})}</div>
    <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:14}}>
      <div className="fi" key={step+"L"} style={{padding:22,borderRadius:14,background:T.cd,border:`1px solid ${s.ag?AGENTS[s.ag]?.c+"18":T.blue+"18"}`}}>
        <div style={{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12}}>
          <span style={{fontSize:13,padding:"4px 10px",borderRadius:5,background:T.t3+"16",color:T.t2,fontFamily:M,fontWeight:700}}>STEP {s.id+1}/{STEPS.length}</span>
          <span style={{fontSize:17,color:T.amber,fontFamily:M,fontWeight:700}}>{s.time}</span>
        </div>
        <h3 style={{fontSize:22,fontWeight:800,color:T.wh,marginBottom:10,lineHeight:1.3}}>{s.title}</h3>
        <p style={{fontSize:16,color:T.t1,lineHeight:1.75,marginBottom:16}}>{s.desc}</p>
        {s.ag&&<div style={{padding:"10px 14px",borderRadius:8,background:AGENTS[s.ag].c+"06",border:`1px solid ${AGENTS[s.ag].c}10`,display:"flex",alignItems:"center",gap:10}}>
          <span style={{fontSize:26}}>{AGENTS[s.ag].i}</span>
          <div><div style={{fontSize:15,color:AGENTS[s.ag].c,fontFamily:M,fontWeight:700}}>{AGENTS[s.ag].n}</div><div style={{fontSize:13,color:T.t2}}>{AGENTS[s.ag].r}</div></div>
        </div>}
      </div>
      <div className="fi" key={step+"R"}><FlowVisual step={step}/></div>
    </div>
    <div style={{display:"flex",gap:12,padding:"12px 20px",borderRadius:8,background:T.sf,border:`1px solid ${T.bd}`,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"}}>
      <span style={{fontSize:14,color:T.t3,fontFamily:M}}>Database: <span style={{color:T.cyan,fontWeight:700}}>{s.dbSt}</span></span>
      <span style={{fontSize:14,color:T.t3,fontFamily:M}}>AI Context: <span style={{color:T.amber,fontWeight:700}}>{s.aiCtx}</span></span>
      <span style={{fontSize:14,color:T.t3,fontFamily:M}}>Elapsed: <span style={{color:T.green,fontWeight:700}}>{s.time}</span></span>
    </div>
  </div>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: INTELLIGENCE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function TabIntel(){
  return<div className="su">
    <div style={{padding:"18px 24px",borderRadius:14,marginBottom:20,background:`linear-gradient(135deg,${T.lime}06,${T.blue}06)`,border:`1px solid ${T.lime}16`}}>
      <h3 style={{fontSize:24,fontWeight:800,color:T.wh,marginBottom:6}}>Not Just AI â€” Domain-Trained, Self-Learning Intelligence</h3>
      <p style={{fontSize:16,color:T.t1,lineHeight:1.6}}>Pre-trained on insurance terminology Â· 42 derived KPIs Â· Gets faster the more you use it Â· Remembers conversation context</p>
    </div>
    <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16}}>
      {/* Domain */}
      <Card border={T.violet+"14"}><div style={{fontSize:19,fontWeight:800,color:T.violet,marginBottom:14}}>ğŸ“– Insurance-Trained Brain</div>
        {[["\"bleeding money\"","Loss Ratio > 150%"],["\"frequency spiking\"","Claims/policy > 2Ïƒ"],["\"tail risk exposure\"","Low-prob, high-severity loss"],["\"burning cost\"","Historical loss rate pricing"],["\"deteriorating book\"","LR above target 3+ periods"]].map((t,i)=>
          <div key={i} style={{display:"flex",gap:10,marginBottom:5,padding:"8px 12px",borderRadius:7,background:T.violet+"05"}}>
            <span style={{fontSize:15,color:T.amber,fontFamily:M,fontWeight:700,minWidth:175}}>{t[0]}</span>
            <span style={{fontSize:14,color:T.t2}}>â†’ {t[1]}</span>
          </div>)}
      </Card>
      {/* KPI */}
      <Card border={T.lime+"14"}><div style={{fontSize:19,fontWeight:800,color:T.lime,marginBottom:14}}>ğŸ§® KPI Derivation â€” 42 Formulas</div>
        {[["Combined Ratio","LR + Expense Ratio"],["Claim Frequency","Claims Ã· Earned Policies"],["Severity Index","Avg Claim Ã· Benchmark"],["Retention Rate","Renewed Ã· Total"],["Burning Cost","Incurred Ã· Exposure"],["Reserve Adequacy","Reserves Ã· Ultimate Loss"]].map((k,i)=>
          <div key={i} style={{display:"flex",justifyContent:"space-between",padding:"8px 12px",borderRadius:7,marginBottom:5,background:T.lime+"05"}}>
            <span style={{fontSize:15,fontWeight:700,color:T.lime,fontFamily:M}}>{k[0]}</span>
            <span style={{fontSize:14,color:T.t3,fontFamily:M}}>{k[1]}</span>
          </div>)}
      </Card>
      {/* Self-Learning */}
      <Card border={T.amber+"14"}><div style={{fontSize:19,fontWeight:800,color:T.amber,marginBottom:14}}>ğŸ”„ Self-Learning Cache</div>
        {[{p:"Week 1",r:"0%",d:"Cold start â€” learning begins",c:T.rose,w:2},{p:"Week 2",r:"25%",d:"Top 5 query types learned",c:T.amber,w:25},{p:"Month 1",r:"45%",d:"Pre-warms at active hours",c:T.amber,w:45},{p:"Month 3",r:"60%",d:"Role-based patterns",c:T.green,w:60},{p:"Month 6+",r:"75%+",d:"Full behavioral model",c:T.green,w:75}].map((l,i)=>
          <div key={i} style={{padding:"8px 12px",borderRadius:7,marginBottom:5,background:l.c+"05"}}>
            <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:3}}>
              <span style={{fontSize:15,fontWeight:700,color:T.wh,fontFamily:M,minWidth:70}}>{l.p}</span>
              <div style={{flex:1,height:6,background:T.bd,borderRadius:4}}><div style={{height:6,borderRadius:4,background:l.c,width:l.w+"%"}}/></div>
              <span style={{fontSize:15,fontWeight:700,color:l.c,fontFamily:M,minWidth:44,textAlign:"right"}}>{l.r}</span>
            </div>
            <div style={{fontSize:13,color:T.t2,paddingLeft:80}}>{l.d}</div>
          </div>)}
        <div style={{marginTop:10,padding:10,borderRadius:7,border:`1px dashed ${T.amber}16`,textAlign:"center",fontSize:16,color:T.amber,fontFamily:M,fontWeight:700}}>Response: 2.2s â†’ 0.8s after 6 months</div>
      </Card>
      {/* Session Memory */}
      <Card border={T.cyan+"14"}><div style={{fontSize:19,fontWeight:800,color:T.cyan,marginBottom:14}}>ğŸ’¬ Session Context Memory</div>
        {[{q:"Show high-risk policies",x:"Establishes user interest"},{q:"Which industry is worst?",x:"Remembers: scoped to high-risk"},{q:"Drill deeper into that",x:"Knows 'that' = construction"},{q:"Compare with healthcare",x:"Builds comparison from context"},{q:"Draft a memo on this",x:"Full context preserved"}].map((c,i)=>
          <div key={i} style={{display:"flex",gap:10,padding:"10px 14px",borderRadius:7,marginBottom:5,background:T.cyan+"05",alignItems:"flex-start"}}>
            <span style={{fontSize:18,fontWeight:800,color:T.cyan,fontFamily:M,minWidth:26,textAlign:"center"}}>{i+1}</span>
            <div style={{flex:1}}><div style={{fontSize:16,fontWeight:600,color:T.wh,marginBottom:2}}>"{c.q}"</div><div style={{fontSize:13,color:T.t2}}>{c.x}</div></div>
          </div>)}
        <div style={{marginTop:10,padding:10,borderRadius:7,border:`1px dashed ${T.cyan}16`,textAlign:"center",fontSize:15,color:T.cyan,fontFamily:M,fontWeight:600}}>Zero repeated context â€” each question builds on the last</div>
      </Card>
    </div>
  </div>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: DATA & RISK â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function TabData(){
  const[panel,setPanel]=useState(null);
  const sources=[
    {id:"flood",n:"Flood Zones",ic:"ğŸŒŠ",c:T.blue,provider:"FEMA NFHL + First Street Foundation",freq:"Monthly",store:"Aurora â€” spatial join to policies",
      fields:["fema_flood_zone (A, AE, V, X)","flood_risk_score (0-100)","projected_annual_flood_prob (%)","max_flood_depth_ft","flood_zone_change_flag"],
      how:"Every policy address geocoded â†’ lat/long â†’ spatial JOIN against FEMA flood layer + private flood grids. Zone change flag detects FEMA map revisions.",
      example:"POL-4401 â†’ FEMA Zone AE, risk score 78/100, recently UPGRADED from Zone X â€” premium may not reflect new zone."},
    {id:"cat",n:"Catastrophe Models",ic:"ğŸŒªï¸",c:T.rose,provider:"RMS / AIR / CoreLogic",freq:"Quarterly",store:"Aurora â€” joined by policy_id or location",
      fields:["cat_aal (Annual Average Loss)","cat_pml_250yr (Probable Max Loss)","primary_peril (wind/quake/fire/flood)","cat_model_version","model_run_date"],
      how:"Cat model output imported per property/location. Mapped to policies by geocoded lat/long or direct policy_id match from carrier's existing cat model runs.",
      example:"POL-4401 â†’ AAL $12,400, PML-250yr $890K, primary peril: Wind, model: RMS v23."},
    {id:"property",n:"Property & Building",ic:"ğŸ¢",c:T.amber,provider:"CoreLogic / CAPE / Verisk",freq:"Quarterly",store:"Aurora â€” joined by address/parcel",
      fields:["construction_type","year_built","stories","sq_footage","roof_type","replacement_cost_estimate","protection_class (ISO)","distance_to_fire_station"],
      how:"Property records linked by address normalization + parcel matching. Replacement cost compared against insured value to flag under/over-insurance.",
      example:"POL-4401 â†’ Frame construction, 1987, Protection Class 5, replacement cost $2.1M vs insured $1.8M â€” potentially under-insured."},
    {id:"crime",n:"Crime & Demographics",ic:"ğŸ”’",c:T.violet,provider:"FBI UCR / Census / Verisk",freq:"Annually",store:"Aurora â€” joined by ZIP/census tract",
      fields:["crime_index (0-100)","property_crime_rate","violent_crime_rate","population_density","business_density"],
      how:"Crime indices mapped at ZIP code or census tract level. Joined to policies by property location. Used for commercial property and GL risk.",
      example:"ZIP 77001 â†’ Crime index 72/100 (high), property crime rate 2.1Ã— national avg."},
    {id:"weather",n:"Weather & Climate",ic:"â›ˆï¸",c:T.cyan,provider:"NOAA / Private Providers",freq:"Monthly",store:"Aurora â€” joined by location grid",
      fields:["historical_severe_events (5yr)","hail_frequency","tornado_proximity","wildfire_risk_score","sea_level_rise_exposure"],
      how:"Historical weather events aggregated per location grid cell. Climate projections overlaid for forward-looking risk. Trend analysis detects increasing event frequency.",
      example:"Harris County â†’ 40% increase in hail events over 5 years. Current pricing may not reflect trend."},
    {id:"financial",n:"Credit & Financial",ic:"ğŸ’³",c:T.green,provider:"D&B / Experian Commercial",freq:"Monthly",store:"Aurora â€” joined by business entity",
      fields:["business_credit_score","financial_stability_indicator","bankruptcy_history","lien_count","years_in_business"],
      how:"Commercial credit data linked by business name + EIN matching. Correlation between credit score and claim propensity used in risk selection.",
      example:"Titan Construction â†’ D&B score 42 (below average), 2 liens, financial stability: declining."},
  ];
  const sel=panel?sources.find(s=>s.id===panel):null;

  return<div className="su">
    {/* Pre-Ingestion Pipeline */}
    <div style={{padding:22,borderRadius:14,background:T.sf,border:`1px solid ${T.bd}`,marginBottom:16}}>
      <div style={{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16,flexWrap:"wrap",gap:8}}>
        <div><div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".1em",fontWeight:600}}>Nightly Pre-Ingestion Pipeline</div>
          <div style={{fontSize:20,fontWeight:700,color:T.wh,marginTop:3}}>Third-Party Data â†’ Geocode â†’ Link â†’ Ready Before 8 AM</div></div>
        <div style={{padding:"6px 14px",borderRadius:8,background:T.green+"10",border:`1px solid ${T.green}18`}}>
          <span style={{fontSize:13,color:T.green,fontFamily:M,fontWeight:700}}>Scheduled Â· Not Real-Time</span>
        </div>
      </div>
      {/* Pipeline flow */}
      <div style={{display:"flex",alignItems:"stretch",gap:0}}>
        {[{t:"External Sources",d:"FEMA, RMS, CoreLogic, D&B, NOAA, FBI UCR",ic:"ğŸ“¥",c:T.violet},
          null,
          {t:"Ingest & Normalize",d:"Parse formats, clean, standardize schemas, validate",ic:"âš™ï¸",c:T.amber},
          null,
          {t:"Geocode & Link",d:"Address â†’ lat/long â†’ spatial join to policies by location",ic:"ğŸ“",c:T.cyan},
          null,
          {t:"Aurora PostgreSQL",d:"Enriched columns added to policy table. Ready for Executor.",ic:"ğŸ’¾",c:T.green}
        ].map((b,i)=>b===null?
          <div key={i} style={{display:"flex",alignItems:"center",padding:"0 6px"}}><span style={{fontSize:18,color:T.t3}}>â†’</span></div>:
          <div key={i} style={{flex:1,padding:"14px 16px",borderRadius:10,background:T.cd,border:`1px solid ${T.bd}`}}>
            <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:6}}>
              <span style={{fontSize:22}}>{b.ic}</span>
              <span style={{fontSize:14,fontWeight:700,color:b.c}}>{b.t}</span>
            </div>
            <div style={{fontSize:12,color:T.t1,lineHeight:1.5}}>{b.d}</div>
          </div>)}
      </div>
      <div style={{display:"flex",gap:8,marginTop:12,alignItems:"center",justifyContent:"center"}}>
        <div style={{padding:"6px 12px",borderRadius:6,background:T.violet+"08",border:`1px solid ${T.violet}10`}}>
          <span style={{fontSize:12,color:T.violet,fontFamily:M,fontWeight:600}}>Unstructured docs (reports, PDFs) â†’ Chunk â†’ Embed â†’ pgvector RAG corpus</span>
        </div>
        <div style={{padding:"6px 12px",borderRadius:6,background:T.blue+"08",border:`1px solid ${T.blue}10`}}>
          <span style={{fontSize:12,color:T.blue,fontFamily:M,fontWeight:600}}>Structured data â†’ Direct columns on policy table in Aurora</span>
        </div>
      </div>
    </div>

    {/* Data Sources Grid */}
    <div style={{fontSize:14,fontWeight:700,color:T.t1,marginBottom:10}}>Click any source to see fields, linking method, and example</div>
    <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,marginBottom:16}}>
      {sources.map(s=><button key={s.id} onClick={()=>setPanel(panel===s.id?null:s.id)} style={{padding:"14px 16px",borderRadius:10,textAlign:"left",background:panel===s.id?s.c+"0C":T.cd,border:`1.5px solid ${panel===s.id?s.c+"40":T.bd}`}}>
        <div style={{display:"flex",alignItems:"center",gap:10,marginBottom:6}}>
          <span style={{fontSize:26}}>{s.ic}</span>
          <div><div style={{fontSize:15,fontWeight:700,color:panel===s.id?s.c:T.wh}}>{s.n}</div>
            <div style={{fontSize:11,color:T.t3,fontFamily:M}}>{s.provider}</div></div>
        </div>
        <div style={{display:"flex",gap:6}}>
          <span style={{fontSize:11,padding:"2px 8px",borderRadius:4,background:T.amber+"10",color:T.amber,fontFamily:M,fontWeight:600}}>{s.freq}</span>
          <span style={{fontSize:11,padding:"2px 8px",borderRadius:4,background:T.blue+"10",color:T.blue,fontFamily:M,fontWeight:600}}>{s.store.split("â€”")[0].trim()}</span>
        </div>
      </button>)}
    </div>

    {/* Detail Panel */}
    {sel&&<div className="fi" style={{padding:20,borderRadius:14,background:T.cd,border:`1px solid ${sel.c}20`,marginBottom:16}}>
      <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:14}}>
        <div style={{display:"flex",alignItems:"center",gap:12}}>
          <span style={{fontSize:32}}>{sel.ic}</span>
          <div><div style={{fontSize:20,fontWeight:700,color:sel.c}}>{sel.n}</div>
            <div style={{fontSize:13,color:T.t2}}>{sel.provider} Â· Updated: {sel.freq}</div></div>
        </div>
        <button onClick={()=>setPanel(null)} style={{color:T.t3,fontSize:18}}>âœ•</button>
      </div>
      <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:14}}>
        <div>
          <div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".06em",marginBottom:8}}>Fields Stored Per Policy</div>
          {sel.fields.map((f,i)=><div key={i} style={{padding:"5px 10px",marginBottom:3,borderRadius:5,background:sel.c+"06",border:`1px solid ${sel.c}08`}}>
            <span style={{fontSize:13,color:T.cyan,fontFamily:M}}>{f}</span>
          </div>)}
        </div>
        <div>
          <div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".06em",marginBottom:8}}>How It Links</div>
          <div style={{fontSize:14,color:T.t1,lineHeight:1.7,marginBottom:14}}>{sel.how}</div>
          <div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".06em",marginBottom:8}}>Example</div>
          <div style={{padding:10,borderRadius:7,background:sel.c+"06",border:`1px dashed ${sel.c}14`}}>
            <span style={{fontSize:13,color:T.t1,lineHeight:1.6}}>{sel.example}</span>
          </div>
        </div>
      </div>
      <div style={{marginTop:12,padding:10,borderRadius:7,background:T.sf,border:`1px solid ${T.bd}`}}>
        <span style={{fontSize:12,color:T.t3,fontFamily:M}}>Storage: </span>
        <span style={{fontSize:13,color:T.blue,fontFamily:M,fontWeight:600}}>{sel.store}</span>
      </div>
    </div>}

    {/* Zone Risk Exposure */}
    <div style={{padding:22,borderRadius:14,background:T.sf,border:`1px solid ${T.bd}`,marginBottom:16}}>
      <div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".1em",fontWeight:600,marginBottom:4}}>Zone Risk Exposure Engine</div>
      <div style={{fontSize:20,fontWeight:700,color:T.wh,marginBottom:16}}>Geocode â†’ Accumulate â†’ Compare â†’ Flag</div>
      <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:10,marginBottom:16}}>
        {[{t:"1. Geocode",d:"Every policy address â†’ lat/long. Mapped to all zone types simultaneously.",ic:"ğŸ“",c:T.cyan},
          {t:"2. Accumulate",d:"TIV, policy count, PML per zone. Full aggregation by Executor.",ic:"ğŸ“Š",c:T.blue},
          {t:"3. Compare",d:"Zone totals vs configurable thresholds set by CUO / risk team.",ic:"âš–ï¸",c:T.amber},
          {t:"4. Flag",d:"Approaching limit â†’ WARN. Breaching limit â†’ ALERT. Glass Box shows evidence.",ic:"ğŸš¨",c:T.rose}
        ].map((s,i)=><div key={i} style={{padding:14,borderRadius:10,background:T.cd,border:`1px solid ${T.bd}`}}>
          <span style={{fontSize:22}}>{s.ic}</span>
          <div style={{fontSize:14,fontWeight:700,color:s.c,marginTop:6,marginBottom:4}}>{s.t}</div>
          <div style={{fontSize:12,color:T.t1,lineHeight:1.5}}>{s.d}</div>
        </div>)}
      </div>
      {/* Zone types */}
      <div style={{fontSize:13,fontWeight:700,color:T.t2,marginBottom:8}}>Supported Zone Types (configurable per client)</div>
      <div style={{display:"flex",gap:6,flexWrap:"wrap",marginBottom:14}}>
        {[{n:"CRESTA Zones",d:"Industry-standard cat zones"},{n:"FEMA Flood Zones",d:"A, AE, V, VE, X"},{n:"Custom Risk Zones",d:"Client-defined areas"},{n:"County / State",d:"Regulatory reporting"},{n:"Wind Pool Zones",d:"Coastal wind exposure"},{n:"Earthquake Fault",d:"USGS seismic zones"},{n:"ZIP Clusters",d:"Fine-grained urban"}].map((z,i)=>
          <span key={i} style={{fontSize:12,padding:"4px 10px",borderRadius:5,background:T.cyan+"08",border:`1px solid ${T.cyan}10`,color:T.cyan,fontFamily:M,fontWeight:600}}>{z.n}</span>)}
      </div>
      {/* Risk appetite */}
      <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:14}}>
        <div style={{padding:16,borderRadius:10,background:T.cd,border:`1px solid ${T.amber}14`}}>
          <div style={{fontSize:14,fontWeight:700,color:T.amber,marginBottom:10}}>âš–ï¸ Risk Appetite Thresholds</div>
          <div style={{fontSize:13,color:T.t1,lineHeight:1.6,marginBottom:10}}>Thresholds are human-defined, not AI-decided. Three sources:</div>
          {[{s:"CUO Risk Appetite",d:"'Max $50M TIV per CRESTA zone'",ic:"ğŸ‘”"},
            {s:"Regulatory Limits",d:"State-imposed concentration caps",ic:"ğŸ›ï¸"},
            {s:"Reinsurance Treaty",d:"PML caps per zone from reinsurer terms",ic:"ğŸ“œ"}
          ].map((t,i)=><div key={i} style={{display:"flex",alignItems:"center",gap:8,padding:"6px 10px",marginBottom:4,borderRadius:5,background:T.amber+"06"}}>
            <span style={{fontSize:16}}>{t.ic}</span>
            <div><span style={{fontSize:13,fontWeight:700,color:T.amber}}>{t.s}</span>
              <span style={{fontSize:12,color:T.t2,marginLeft:6}}>{t.d}</span></div>
          </div>)}
          <div style={{marginTop:8,padding:8,borderRadius:5,border:`1px dashed ${T.amber}16`,textAlign:"center"}}>
            <span style={{fontSize:12,color:T.amber,fontFamily:M,fontWeight:600}}>AI enforces thresholds. Humans define them.</span>
          </div>
        </div>
        <div style={{padding:16,borderRadius:10,background:T.cd,border:`1px solid ${T.green}14`}}>
          <div style={{fontSize:14,fontWeight:700,color:T.green,marginBottom:10}}>ğŸ“Š Zone Accumulation Metrics</div>
          <div style={{fontSize:13,color:T.t1,lineHeight:1.6,marginBottom:10}}>Per zone, the Executor computes:</div>
          {["Total Insured Value (TIV)","Policy count","Maximum Single Loss (MSL)","Probable Maximum Loss (PML-250yr)","Average Loss Ratio in zone","Gross Written Premium (GWP)","QoQ TIV trend (growing/stable/declining)"].map((m,i)=>
            <div key={i} style={{display:"flex",alignItems:"center",gap:6,padding:"4px 0"}}>
              <Glow c={T.green} s={5}/>
              <span style={{fontSize:13,color:T.t1,fontFamily:M}}>{m}</span>
            </div>)}
        </div>
      </div>
      {/* Example */}
      <div style={{marginTop:14,padding:16,borderRadius:10,background:T.cd,border:`1px solid ${T.rose}14`}}>
        <div style={{fontSize:14,fontWeight:700,color:T.rose,marginBottom:10}}>ğŸš¨ Example: Zone Breach Detection</div>
        <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10}}>
          <div style={{padding:10,borderRadius:7,background:T.amber+"06",border:`1px solid ${T.amber}10`}}>
            <div style={{fontSize:13,fontWeight:700,color:T.amber,marginBottom:4}}>Harris County (US-TX-003)</div>
            <div style={{fontSize:12,color:T.t1,fontFamily:M,lineHeight:1.6}}>TIV: $42M / $50M limit â†’ 84% âœ“<br/>PML: $38M / $40M limit â†’ 95% âš ï¸<br/>Status: <span style={{color:T.amber,fontWeight:700}}>APPROACHING</span></div>
          </div>
          <div style={{padding:10,borderRadius:7,background:T.rose+"06",border:`1px solid ${T.rose}10`}}>
            <div style={{fontSize:13,fontWeight:700,color:T.rose,marginBottom:4}}>Miami-Dade (US-FL-001)</div>
            <div style={{fontSize:12,color:T.t1,fontFamily:M,lineHeight:1.6}}>TIV: $58M / $50M limit â†’ 116% âŒ<br/>PML: $44M / $40M limit â†’ 110% âŒ<br/>Status: <span style={{color:T.rose,fontWeight:700}}>BREACH â€” 2 thresholds</span></div>
          </div>
        </div>
      </div>
    </div>

    {/* How Structured + Unstructured Link */}
    <div style={{padding:22,borderRadius:14,background:T.sf,border:`1px solid ${T.bd}`}}>
      <div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".1em",fontWeight:600,marginBottom:4}}>Data Linking for LLM Reasoning</div>
      <div style={{fontSize:20,fontWeight:700,color:T.wh,marginBottom:16}}>How Structured + Unstructured Data Become One Context</div>
      <div style={{display:"grid",gridTemplateColumns:"1fr auto 1fr auto 1fr",gap:0,alignItems:"stretch"}}>
        <div style={{padding:16,borderRadius:10,background:T.cd,border:`1px solid ${T.blue}14`}}>
          <div style={{fontSize:14,fontWeight:700,color:T.blue,marginBottom:8}}>ğŸ’¾ Structured Data</div>
          <div style={{fontSize:12,color:T.t1,lineHeight:1.6}}>Claims, premiums, policy details, third-party enrichment (flood zones, cat models, property data). Lives in Aurora PostgreSQL.</div>
          <div style={{marginTop:8,padding:6,borderRadius:5,background:T.blue+"06",textAlign:"center"}}>
            <span style={{fontSize:11,color:T.blue,fontFamily:M,fontWeight:600}}>Executor â†’ SQL â†’ 30-60 summary rows</span>
          </div>
        </div>
        <div style={{display:"flex",alignItems:"center",padding:"0 10px"}}><span style={{fontSize:22,color:T.t3}}>+</span></div>
        <div style={{padding:16,borderRadius:10,background:T.cd,border:`1px solid ${T.violet}14`}}>
          <div style={{fontSize:14,fontWeight:700,color:T.violet,marginBottom:8}}>ğŸ“š Unstructured Data</div>
          <div style={{fontSize:12,color:T.t1,lineHeight:1.6}}>UW guidelines, past decision rationale, cat model reports, engineering assessments, regulatory docs. Chunked, embedded, stored in pgvector.</div>
          <div style={{marginTop:8,padding:6,borderRadius:5,background:T.violet+"06",textAlign:"center"}}>
            <span style={{fontSize:11,color:T.violet,fontFamily:M,fontWeight:600}}>RAG â†’ semantic search â†’ 4-8 documents</span>
          </div>
        </div>
        <div style={{display:"flex",alignItems:"center",padding:"0 10px"}}><span style={{fontSize:22,color:T.t3}}>â†’</span></div>
        <div style={{padding:16,borderRadius:10,background:T.cd,border:`1px solid ${T.orange}14`}}>
          <div style={{fontSize:14,fontWeight:700,color:T.orange,marginBottom:8}}>ğŸ”¬ LLM Context Package</div>
          <div style={{fontSize:12,color:T.t1,lineHeight:1.6}}>Both assembled into one labeled package. LLM reads pre-linked findings â€” numbers and rules side by side. Writes narrative.</div>
          <div style={{marginTop:8,padding:6,borderRadius:5,background:T.orange+"06",textAlign:"center"}}>
            <span style={{fontSize:11,color:T.orange,fontFamily:M,fontWeight:600}}>AI reads assembled context â†’ writes narrative</span>
          </div>
        </div>
      </div>
      <div style={{marginTop:14,padding:12,borderRadius:8,border:`1px dashed ${T.lime}16`,textAlign:"center"}}>
        <span style={{fontSize:14,color:T.lime,fontWeight:700}}>The LLM doesn't link data â€” the pipeline does. By the time AI sees it, numbers and guidelines are side by side.</span>
      </div>
    </div>
  </div>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: AGENTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function TabAgents(){
  const[sel,setSel]=useState(null);
  return<div className="su" style={{display:"grid",gridTemplateColumns:"280px 1fr",gap:16,minHeight:500}}>
    <div style={{display:"flex",flexDirection:"column",gap:5}}>
      {AGENT_KEYS.map(k=>{const a=AGENTS[k];return<button key={k} onClick={()=>setSel(k)} style={{padding:"12px 14px",borderRadius:9,textAlign:"left",border:`1.5px solid ${sel===k?a.c+"40":T.bd}`,background:sel===k?a.c+"0C":T.cd,display:"flex",alignItems:"center",gap:10}}>
        <span style={{fontSize:28}}>{a.i}</span>
        <div><div style={{fontSize:14,fontWeight:700,color:sel===k?a.c:T.wh,fontFamily:M}}>{a.n}</div><div style={{fontSize:12,color:T.t3}}>{a.r}</div></div>
      </button>})}
    </div>
    <Card border={sel?AGENTS[sel]?.c+"18":T.bd} style={{padding:28}}>
      {sel?(()=>{const a=AGENTS[sel];return<div className="su" key={sel}>
        <div style={{display:"flex",alignItems:"center",gap:16,marginBottom:22}}>
          <div style={{width:68,height:68,borderRadius:16,display:"flex",alignItems:"center",justifyContent:"center",fontSize:36,background:a.c+"10",border:`2px solid ${a.c}28`}}>{a.i}</div>
          <div><div style={{fontSize:26,fontWeight:800,color:T.wh}}>{a.n}</div><div style={{fontSize:16,color:a.c,fontFamily:M,fontWeight:600}}>{a.r}</div></div>
          <div style={{marginLeft:"auto",padding:"6px 14px",borderRadius:8,background:a.c+"10",border:`1px solid ${a.c}18`}}>
            <div style={{fontSize:10,color:T.t3,fontFamily:M,textTransform:"uppercase"}}>Pipeline Step</div>
            <div style={{fontSize:18,fontWeight:700,color:a.c,fontFamily:M}}>#{a.step} of 9</div>
          </div>
          <div style={{padding:"6px 14px",borderRadius:8,background:T.aws+"08",border:`1px solid ${T.aws}14`}}>
            <div style={{fontSize:10,color:T.t3,fontFamily:M,textTransform:"uppercase"}}>AWS Service</div>
            <div style={{fontSize:14,fontWeight:600,color:T.aws,fontFamily:M}}>{a.aws}</div>
          </div>
        </div>
        {a.h.map((h,i)=><div key={i} style={{display:"flex",alignItems:"center",gap:12,padding:"12px 16px",borderRadius:8,marginBottom:6,background:a.c+"06",border:`1px solid ${a.c}08`}}>
          <Glow c={a.c} s={8}/><span style={{fontSize:16,color:T.t1}}>{h}</span>
        </div>)}
      </div>})():
      <div style={{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:T.t3}}>
        <div style={{textAlign:"center"}}><div style={{fontSize:52,marginBottom:10}}>ğŸ‘ˆ</div><div style={{fontSize:18,fontWeight:600}}>Select an agent to explore</div></div>
      </div>}
    </Card>
  </div>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB: AWS ARCHITECTURE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function TabAWS(){
  const[sel,setSel]=useState(null);
  const det={
    cf:{t:"CloudFront + S3",d:"Static React app from 300+ edge locations. S3 ~$0.023/GB. Shield Standard free DDoS protection. Cache-Control headers minimize origin hits.",c:"~$3/mo",s:"Unlimited users, 300+ edges"},
    waf:{t:"WAF + Cognito",d:"WAF blocks injection/DDoS. Cognito JWT auth with 50K MAU free tier. User-scoped access enforced at token level before any data query.",c:"~$6/mo",s:"50K MAU free tier"},
    apigw:{t:"API Gateway HTTP",d:"HTTP API â€” 71% cheaper than REST API. Routes to Lambda. WebSocket for streaming AI responses. Auto-throttle, CORS, validation.",c:"$1/1M requests",s:"10K concurrent"},
    lambda:{t:"Lambda (Python)",d:"All 9 LangGraph agents run as serverless functions. 1M free requests/month. Provisioned Concurrency on hot paths for cold start mitigation.",c:"$0.20/1M invocations",s:"1K concurrent, instant scale"},
    stepfn:{t:"Step Functions Express",d:"Orchestrates the 9-agent pipeline. Express workflows for synchronous flows (<5 min). Handles parallel execution, retry logic, error routing between agents.",c:"$0.025/1K transitions",s:"Unlimited parallel branches"},
    aurora:{t:"Aurora Serverless v2 + pgvector",d:"PostgreSQL with pgvector eliminates separate vector DB cost ($50-200/mo saved). Scales 0.5â†’128 ACU auto. HNSW indexing for fast RAG semantic search.",c:"$0.12/ACU-hr",s:"0.5â†’128 ACU auto-scale"},
    redis:{t:"ElastiCache Serverless (Redis)",d:"Behavioral query cache learned by RM-Cortex. Scales to zero when idle. Stores pre-warmed results, session context, user query patterns. Sub-ms reads.",c:"$0.0034/ECPU-hr",s:"Auto-scale to zero idle"},
    claude:{t:"Anthropic Claude (Direct API)",d:"Direct API = 15-30% cheaper than AWS Bedrock. Claude Sonnet for analysis, Haiku for lookups. Multi-provider fallback chain ensures zero LLM downtime.",c:"~$3+$15/1K tokens",s:"Rate-limited by Lambda retry"},
  };
  const d=sel?det[sel]:null;

  const SB=({id,nm,sb,c,co})=><div onClick={()=>setSel(sel===id?null:id)} style={{padding:"12px 16px",borderRadius:10,background:sel===id?c+"0C":T.cd,border:`1.5px solid ${sel===id?c+"40":T.bd}`,cursor:"pointer",minWidth:140}}>
    <div style={{fontSize:15,fontWeight:700,color:sel===id?c:T.wh}}>{nm}</div>
    <div style={{fontSize:12,color:T.t2,fontFamily:M,marginTop:2}}>{sb}</div>
    {co&&<div style={{marginTop:6,fontSize:12,padding:"3px 8px",borderRadius:4,background:T.green+"10",color:T.green,fontWeight:600,fontFamily:M,display:"inline-block"}}>{co}</div>}
  </div>;

  /* Agent flow node */
  const AN=({a})=><div style={{flex:1,padding:"14px 16px",borderRadius:12,background:T.cd,border:`1.5px solid ${T.bd}`,position:"relative"}}>
    <div style={{position:"absolute",top:-10,left:14,padding:"2px 10px",borderRadius:12,background:a.c,fontSize:11,fontWeight:700,color:"#000",fontFamily:M}}>STEP {a.step}</div>
    <div style={{display:"flex",alignItems:"center",gap:10,marginTop:4,marginBottom:6}}>
      <span style={{fontSize:26}}>{a.i}</span>
      <div><div style={{fontSize:13,fontWeight:700,color:a.c,fontFamily:M}}>{a.n}</div><div style={{fontSize:11,color:T.t2}}>{a.r}</div></div>
    </div>
    <div style={{fontSize:12,color:T.t1,lineHeight:1.4,fontFamily:M}}>{a.h[0]}</div>
    <div style={{marginTop:6,fontSize:10,padding:"2px 8px",borderRadius:4,background:T.aws+"08",color:T.aws,fontFamily:M,display:"inline-block"}}>âš¡ {a.aws}</div>
  </div>;

  const FA=({lb,c=T.t2})=><div style={{display:"flex",flexDirection:"column",alignItems:"center",padding:"0 8px",minWidth:52}}>
    <svg width="46" height="20" viewBox="0 0 46 20"><line x1="0" y1="10" x2="34" y2="10" stroke={c} strokeWidth="1.8" strokeDasharray="5,3"/><polygon points="34,5.5 45,10 34,14.5" fill={c}/></svg>
    <span style={{fontSize:10,color:T.t3,fontFamily:M,whiteSpace:"nowrap"}}>{lb}</span>
  </div>;
  const DA=({lb,c=T.t2})=><div style={{display:"flex",flexDirection:"column",alignItems:"center",padding:"2px 0"}}>
    <svg width="16" height="24" viewBox="0 0 16 24"><line x1="8" y1="0" x2="8" y2="17" stroke={c} strokeWidth="1.8" strokeDasharray="5,3"/><polygon points="3.5,16 8,24 12.5,16" fill={c}/></svg>
    <span style={{fontSize:10,color:T.t3,fontFamily:M}}>{lb}</span>
  </div>;

  return<div className="su">
    {/* Agent Pipeline Flow */}
    <div style={{padding:22,borderRadius:14,background:T.sf,border:`1px solid ${T.bd}`,marginBottom:16}}>
      <div style={{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:18,flexWrap:"wrap",gap:8}}>
        <div><div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".1em",fontWeight:600}}>Step Functions Express Â· LangGraph State Machine</div>
          <div style={{fontSize:20,fontWeight:700,color:T.wh,marginTop:3}}>9-Agent Pipeline Flow</div></div>
        <div style={{display:"flex",gap:14}}>
          <div style={{display:"flex",alignItems:"center",gap:6}}><div style={{width:24,height:2,background:T.t2}}/><span style={{fontSize:11,color:T.t3,fontFamily:M}}>data flow</span></div>
          <div style={{display:"flex",alignItems:"center",gap:6}}><div style={{width:24,height:2,background:T.amber,opacity:.6}}/><span style={{fontSize:11,color:T.t3,fontFamily:M}}>cache skip</span></div>
        </div>
      </div>
      {/* Row 1 */}
      <div style={{display:"flex",alignItems:"stretch",gap:0,marginBottom:6}}>
        <AN a={AGENT_LIST[0]}/><FA lb="enriched" c={T.lime}/><AN a={AGENT_LIST[1]}/><FA lb="plan" c={T.blue}/><AN a={AGENT_LIST[2]}/>
      </div>
      <div style={{display:"flex",justifyContent:"flex-end",paddingRight:"14%"}}><DA lb="schema ctx" c={T.cyan}/></div>
      <div style={{position:"relative",height:0}}><div style={{position:"absolute",left:"5%",top:-14,padding:"3px 12px",borderRadius:12,background:T.amber+"10",border:`1px dashed ${T.amber}25`,zIndex:2}}>
        <span style={{fontSize:11,color:T.amber,fontFamily:M,fontWeight:700}}>Cache HITs skip â†’ Analyst â¤µ</span>
      </div></div>
      {/* Row 2 */}
      <div style={{display:"flex",alignItems:"stretch",gap:0,marginBottom:6}}>
        <AN a={AGENT_LIST[3]}/><FA lb="misses" c={T.amber}/><AN a={AGENT_LIST[4]}/><FA lb="parallel" c={T.green}/><AN a={AGENT_LIST[5]}/>
      </div>
      <div style={{display:"flex"}}><div style={{flex:1,display:"flex",justifyContent:"center"}}><DA lb="results (39)" c={T.green}/></div><div style={{flex:1,display:"flex",justifyContent:"center"}}><DA lb="guidelines (4)" c={T.violet}/></div></div>
      {/* Row 3 */}
      <div style={{display:"flex",alignItems:"stretch",gap:0}}>
        <AN a={AGENT_LIST[6]}/><FA lb="synthesis" c={T.orange}/><AN a={AGENT_LIST[7]}/><FA lb="validated" c={T.pink}/><AN a={AGENT_LIST[8]}/>
      </div>
      {/* Summary bar */}
      <div style={{marginTop:14,padding:"10px 18px",borderRadius:8,background:T.cd,border:`1px solid ${T.bd}`,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:8}}>
        <div style={{display:"flex",alignItems:"center",gap:12}}>
          {[{l:"ğŸ’¬ Query",c:T.wh},{l:"âš¡ 5M scanned",c:T.green},{l:"ğŸ”¬ ~52 to AI",c:T.orange},{l:"ğŸ” Glass Box",c:T.rose}].map((d,i)=>
            <div key={i} style={{display:"flex",alignItems:"center",gap:5}}>{i>0&&<span style={{color:T.t3}}>â†’</span>}<span style={{fontSize:14,color:d.c,fontFamily:M,fontWeight:600}}>{d.l}</span></div>)}
        </div>
        <span style={{fontSize:15,color:T.amber,fontFamily:M,fontWeight:700}}>~2.0s total</span>
      </div>
    </div>

    {/* AWS Infra */}
    <div style={{padding:22,borderRadius:14,background:T.sf,border:`1px solid ${T.bd}`,marginBottom:16}}>
      <div style={{fontSize:12,color:T.t3,fontFamily:M,textTransform:"uppercase",letterSpacing:".1em",fontWeight:600,marginBottom:16}}>AWS Infrastructure â€” Click Any Service for Details</div>
      {/* Edge */}
      <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:14,flexWrap:"wrap"}}>
        <div style={{width:78,fontSize:13,color:T.aws,fontFamily:M,fontWeight:700}}>EDGE</div>
        <div style={{padding:"10px 16px",borderRadius:8,border:`1px dashed ${T.t3}30`,display:"flex",alignItems:"center",gap:10}}>
          <span style={{fontSize:26}}>ğŸ‘¤</span><div><div style={{fontSize:14,fontWeight:700,color:T.wh}}>Users</div><div style={{fontSize:11,color:T.t3,fontFamily:M}}>Browser / Mobile</div></div>
        </div>
        <span style={{fontSize:18,color:T.t3}}>â†’</span>
        <SB id="cf" nm="CloudFront + S3" sb="Static CDN" c={T.aws} co="~$3/mo"/>
        <span style={{fontSize:18,color:T.t3}}>â†’</span>
        <SB id="waf" nm="WAF + Cognito" sb="Auth + Security" c={T.aws} co="~$6/mo"/>
        <span style={{fontSize:18,color:T.t3}}>â†’</span>
        <SB id="apigw" nm="API Gateway" sb="HTTP API" c={T.violet} co="$1/1M"/>
      </div>
      <div style={{height:1,background:T.bd,margin:"4px 0 4px 78px"}}/>
      {/* Compute */}
      <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:14,flexWrap:"wrap"}}>
        <div style={{width:78,fontSize:13,color:T.violet,fontFamily:M,fontWeight:700}}>COMPUTE</div>
        <SB id="lambda" nm="Lambda Functions" sb="Python Â· 9 Agents" c={T.aws} co="$0.20/1M"/>
        <span style={{fontSize:18,color:T.t3}}>â†’</span>
        <SB id="stepfn" nm="Step Functions" sb="Express Pipeline" c={T.pink} co="$0.025/1K"/>
        <span style={{fontSize:18,color:T.t3}}>â†’</span>
        <div style={{padding:"8px 14px",borderRadius:8,background:T.blue+"08",border:`1px solid ${T.blue}12`}}>
          <span style={{fontSize:13,color:T.blue,fontFamily:M,fontWeight:700}}>9-Agent Pipeline â†‘</span>
        </div>
      </div>
      <div style={{height:1,background:T.bd,margin:"4px 0 4px 78px"}}/>
      {/* Data + AI */}
      <div style={{display:"flex",gap:16,flexWrap:"wrap"}}>
        <div style={{flex:1,minWidth:260}}>
          <div style={{fontSize:13,color:T.blue,fontFamily:M,fontWeight:700,marginBottom:10}}>DATA LAYER (AWS)</div>
          <div style={{display:"flex",flexDirection:"column",gap:8}}>
            <SB id="aurora" nm="Aurora Serverless v2" sb="PostgreSQL + pgvector" c={T.blue} co="$0.12/ACU-hr"/>
            <SB id="redis" nm="ElastiCache Redis" sb="Behavioral Cache" c={T.teal} co="$0.0034/ECPU-hr"/>
          </div>
        </div>
        <div style={{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:6}}>
          <svg width="42" height="16" viewBox="0 0 42 16"><line x1="6" y1="8" x2="32" y2="8" stroke={T.t3} strokeWidth="1.5" strokeDasharray="4,3"/><polygon points="32,4 41,8 32,12" fill={T.t3}/><polygon points="10,4 1,8 10,12" fill={T.t3}/></svg>
          <span style={{fontSize:11,color:T.t3,fontFamily:M}}>queries â†” results</span>
        </div>
        <div style={{flex:1,minWidth:260}}>
          <div style={{fontSize:13,color:T.anth,fontFamily:M,fontWeight:700,marginBottom:10}}>AI LAYER (MIXED CLOUD)</div>
          <div style={{display:"flex",flexDirection:"column",gap:8}}>
            <SB id="claude" nm="Anthropic Claude" sb="Direct API Â· Primary" c={T.anth} co="~$3+$15/1K tok"/>
            <div style={{padding:"10px 14px",borderRadius:10,background:T.cd,border:`1px solid ${T.bd}`}}>
              <div style={{fontSize:11,color:T.t3,fontFamily:M,textTransform:"uppercase",fontWeight:600,marginBottom:8}}>LLM Fallback Chain</div>
              <div style={{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"}}>
                {[{n:"Claude",c:T.anth,t:"PRIMARY"},{n:"Bedrock",c:T.aws,t:"FB1"},{n:"OpenAI",c:T.green,t:"FB2"},{n:"Mock",c:T.t3,t:"LAST"}].map((l,i)=>
                  <div key={i} style={{display:"flex",alignItems:"center",gap:5}}>
                    <div style={{padding:"4px 10px",borderRadius:5,background:l.c+"0A",border:`1px solid ${l.c}16`,textAlign:"center"}}>
                      <div style={{fontSize:13,fontWeight:700,color:l.c,fontFamily:M}}>{l.n}</div>
                      <div style={{fontSize:9,color:T.t3,fontFamily:M}}>{l.t}</div>
                    </div>{i<3&&<span style={{fontSize:14,color:T.t3}}>â†’</span>}
                  </div>)}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    {/* Detail */}
    {d&&<div className="fi" style={{padding:20,borderRadius:12,background:T.cd,border:`1px solid ${T.bl}`,marginBottom:16}}>
      <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:10}}><h3 style={{fontSize:20,fontWeight:700,color:T.wh}}>{d.t}</h3><button onClick={()=>setSel(null)} style={{color:T.t3,fontSize:20}}>âœ•</button></div>
      <p style={{fontSize:16,color:T.t1,lineHeight:1.75,marginBottom:14}}>{d.d}</p>
      <div style={{display:"flex",gap:14}}>
        <div style={{padding:"10px 18px",borderRadius:8,background:T.green+"08",border:`1px solid ${T.green}12`}}><div style={{fontSize:11,color:T.t3,fontFamily:M,textTransform:"uppercase"}}>Cost</div><div style={{fontSize:18,fontWeight:700,color:T.green,fontFamily:M}}>{d.c}</div></div>
        <div style={{padding:"10px 18px",borderRadius:8,background:T.blue+"08",border:`1px solid ${T.blue}12`}}><div style={{fontSize:11,color:T.t3,fontFamily:M,textTransform:"uppercase"}}>Scale</div><div style={{fontSize:15,fontWeight:600,color:T.blue,fontFamily:M}}>{d.s}</div></div>
      </div>
    </div>}

    {/* Decisions */}
    <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:14,marginBottom:16}}>
      {[{ic:"ğŸ’¡",t:"Why Mixed Cloud?",c:T.green,items:["Anthropic direct = 15-30% cheaper than Bedrock","Multi-provider fallback = zero LLM downtime","AWS for infra (cheapest serverless)","Best-of-breed at every layer"]},
        {ic:"ğŸ’¡",t:"Why pgvector on Aurora?",c:T.blue,items:["Eliminates separate vector DB ($50-200/mo)","Same DB for structured + vector queries","HNSW indexing = fast semantic search","One less service to manage & secure"]},
        {ic:"ğŸ’¡",t:"Why Serverless?",c:T.aws,items:["$0 when idle, scales to millions","No EC2 instances to patch","Auto-scaling at every layer","~$15/mo idle â†’ ~$180/mo at 10K/day"]}
      ].map((d,i)=><Card key={i}><div style={{fontSize:14,fontWeight:700,color:d.c,marginBottom:10}}>{d.ic} {d.t}</div>
        {d.items.map((t,j)=><div key={j} style={{fontSize:13,color:T.t1,padding:"3px 0",display:"flex",alignItems:"flex-start",gap:5,lineHeight:1.5}}>
          <span style={{color:d.c,flexShrink:0}}>â€º</span>{t}
        </div>)}
      </Card>)}
    </div>

    {/* Cost */}
    <div style={{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:14}}>
      {[{t:"Development",c:"~$15/mo",cl:T.green,items:["Lambda: free tier","Aurora: 0.5 ACU","Cache: minimal","S3: < 1GB"]},
        {t:"Production (1K/day)",c:"~$65/mo",cl:T.blue,items:["Lambda: ~$3","Aurora: 2-4 ACU","Anthropic: ~$25","Other: ~$18"]},
        {t:"Scale (10K/day)",c:"~$180/mo",cl:T.aws,items:["Lambda: ~$12","Aurora: 8-16 ACU","Anthropic: ~$90","Other: ~$45"]}
      ].map((ct,i)=><div key={i} style={{padding:"16px 18px",borderRadius:12,background:ct.cl+"06",border:`1px solid ${ct.cl}10`}}>
        <div style={{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:8}}>
          <span style={{fontSize:15,fontWeight:700,color:T.wh}}>{ct.t}</span>
          <span style={{fontSize:22,fontWeight:700,color:ct.cl,fontFamily:M}}>{ct.c}</span>
        </div>
        {ct.items.map((it,j)=><div key={j} style={{fontSize:14,color:T.t2,fontFamily:M,padding:"2px 0"}}>{it}</div>)}
      </div>)}
    </div>
  </div>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN APP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function App(){
  const[tab,setTab]=useState("flow");
  const tabs=[
    {id:"flow",l:"âš¡ Live Flow",c:T.blue},
    {id:"intel",l:"ğŸ§  Intelligence",c:T.lime},
    {id:"data",l:"ğŸŒ Data & Risk",c:T.cyan},
    {id:"agents",l:"ğŸ§¬ Agents",c:T.violet},
    {id:"aws",l:"â˜ï¸ AWS Architecture",c:T.aws},
  ];

  return<div style={{maxWidth:1260,margin:"0 auto",padding:"32px 26px"}}>
    {/* Header */}
    <div style={{textAlign:"center",marginBottom:26}}>
      <div style={{display:"inline-flex",alignItems:"center",gap:10,padding:"6px 16px",borderRadius:20,background:T.lime+"10",border:`1px solid ${T.lime}20`,marginBottom:12}}>
        <Glow c={T.lime} s={7} p/>
        <span style={{fontSize:13,fontWeight:700,color:T.lime,fontFamily:M,letterSpacing:".08em",textTransform:"uppercase"}}>Interactive Architecture Demo</span>
      </div>
      <h1 style={{fontSize:44,fontWeight:900,letterSpacing:"-.04em",background:`linear-gradient(135deg,${T.wh},${T.blue},${T.lime})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:10}}>RiskMind AI Engine</h1>
      <div style={{display:"flex",gap:10,justifyContent:"center",flexWrap:"wrap"}}>
        <Badge l="Agents" v="9" c={T.blue}/>
        <Badge l="Scale" v="50 â†’ 50M rows" c={T.green}/>
        <Badge l="KPIs" v="42 derived" c={T.lime}/>
        <Badge l="Response" v="< 2.5s" c={T.amber}/>
        <Badge l="Idle Cost" v="~$15/mo" c={T.aws}/>
      </div>
    </div>

    {/* Tab Navigation */}
    <div style={{display:"flex",justifyContent:"center",gap:6,marginBottom:22}}>
      {tabs.map(t=><button key={t.id} onClick={()=>setTab(t.id)} style={{
        padding:"10px 24px",borderRadius:10,
        border:`2px solid ${tab===t.id?t.c:T.bd}`,
        background:tab===t.id?t.c+"12":"transparent",
        color:tab===t.id?t.c:T.t2,
        fontSize:16,fontWeight:700,
      }}>{t.l}</button>)}
    </div>

    {/* Tab Content */}
    <div key={tab}>
      {tab==="flow"&&<TabFlow/>}
      {tab==="intel"&&<TabIntel/>}
      {tab==="data"&&<TabData/>}
      {tab==="agents"&&<TabAgents/>}
      {tab==="aws"&&<TabAWS/>}
    </div>

    <div style={{textAlign:"center",marginTop:32,padding:"14px 0",borderTop:`1px solid ${T.bd}`}}>
      <span style={{fontSize:13,color:T.t3,fontFamily:M}}>RiskMind AI Engine Â· Complete Architecture Â· Confidential</span>
    </div>
  </div>;
}

ReactDOM.render(<App/>,document.getElementById("root"));
</script>
</body>
</html>
